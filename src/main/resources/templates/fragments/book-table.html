<tr th:if="${bookList.isEmpty()}">
    <!-- Case 1: user searched -->
    <td colspan="100%" th:if="${searchQuery != null}">
        Sorry, no books were found matching "<span th:text="${searchQuery}"></span>".
    </td>

    <!-- Case 2:no books found-->
    <td colspan="100%" th:if="${searchQuery == null}">
        Sorry, no books found.
    </td>
</tr>
<tr class="align-middle" th:if="${not bookList.isEmpty()}" th:each="book: ${bookList}" >

    <td th:text="${book.ISBN}"></td>
    <td>
        <a class="text-wrap" th:href="@{'/book/' + ${book.ISBN}}" th:text="${book.title}"></a>
    </td>
    <td th:text="${book.author}"></td>
    <td th:text="${book.publisher}"></td>
    <td class="text-wrap" th:text="${book.description}"></td>
    <td>
        <span th:if="${book.inventory > 0}" th:text="${book.inventory}"></span>
        <span th:if="${book.inventory == 0}" style="color:red; font-weight:bold;">Out of Stock</span>
    </td>
    <td th:text="'$' + ${book.price}"></td>
    <td>
        <!-- Edit Book Form-->
        <button class="open-edit-book-modal btn btn-outline-secondary p-0 w-100" th:disabled="${book.deleted}" th:data-isbn="${book.ISBN}" th:href="@{'/edit-book/' + ${book.ISBN}}">Edit</button>
        <div th:insert="~{fragments/book-form/edit-book-modal}"></div>
        <!-- Delete Book Form -->
        <form class="book-update-button" th:classappend="${book.deleted} ?' btn-disabled'"  th:action="@{/delete-book/{ISBN}(ISBN=${book.ISBN})}" method="post">
            <button class="btn btn-outline-danger p-0 w-100" type="submit" th:disabled="${book.deleted}">Delete</button>
        </form>
        <!-- Purchase Book Form-->
        <div>
            <form class="purchase-button" th:data-isbn="${book.ISBN}"  th:action="@{/shopping-cart/edit/add/{ISBN}(ISBN=${book.ISBN})}" method="post">
                <button th:class="${book.inventory == 0} ? 'purchase-btn p-0 w-100 btn btn-outline-danger' : 'purchase-btn  p-0 w-100 btn btn-outline-warning'" type="submit" th:disabled="${book.inventory == 0 or book.deleted}"
                        th:text="${book.inventory == 0} ? 'Out of Stock' : 'Add to Cart'"></button>
            </form>
        </div>
    </td>
</tr>
<script th:src="@{/js/edit-book.js}"></script>
<script th:src="@{/js/purchase-button.js}"></script>